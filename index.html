<!doctype html>

<html lang="en">

<head class="h-100">
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<!-- Bootstrap CSS -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootswatch@4.4/dist/cosmo/bootstrap.min.css">

	<title>HTML to Markdown</title>
</head>

<body class="h-100 d-flex flex-column">
	<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
		<span class="navbar-brand">HTML to Markdown</span>
	</nav>

	<textarea id="editor"></textarea>
	<pre id="markdown" class="m-3" style="white-space:pre-wrap;"></section>

	<script src="https://cdn.jsdelivr.net/npm/jquery@3.4/dist/jquery.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16/dist/umd/popper.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.4/dist/js/bootstrap.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/ckeditor@4.12/ckeditor.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/turndown@5.0/dist/turndown.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/turndown-plugin-gfm@1.0/dist/turndown-plugin-gfm.js"></script>
	<script>
		(function () {
			"use strict";

			let DOM = {},
				Bundle = {};

			DOM.editor = CKEDITOR.replace("editor");
			DOM.markdown = jQuery("#markdown");

			Bundle.turndownService = new TurndownService({
				headingStyle: "atx",
				hr: "---",
				bulletListMarker: "-"
			});
			Bundle.turndownService.use(turndownPluginGfm.gfm);

			function updateMarkdown () {
				let html = DOM.editor.getData();
				let markdown = Bundle.turndownService.turndown(html);

				DOM.markdown.text(markdown);
			}

			jQuery(function () {
				DOM.editor.on("change", updateMarkdown);
			});
		})();
	</script>
</body>

</html>